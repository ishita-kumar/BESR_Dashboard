{"ast":null,"code":"/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2015, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n(function () {\n  var Color,\n      DEG2RAD,\n      LAB_CONSTANTS,\n      PI,\n      PITHIRD,\n      RAD2DEG,\n      TWOPI,\n      _guess_formats,\n      _guess_formats_sorted,\n      _input,\n      _interpolators,\n      abs,\n      atan2,\n      bezier,\n      blend,\n      blend_f,\n      brewer,\n      burn,\n      chroma,\n      clip_rgb,\n      cmyk2rgb,\n      colors,\n      cos,\n      css2rgb,\n      darken,\n      dodge,\n      each,\n      floor,\n      hex2rgb,\n      hsi2rgb,\n      hsl2css,\n      hsl2rgb,\n      hsv2rgb,\n      interpolate,\n      interpolate_hsx,\n      interpolate_lab,\n      interpolate_num,\n      interpolate_rgb,\n      lab2lch,\n      lab2rgb,\n      lab_xyz,\n      lch2lab,\n      lch2rgb,\n      lighten,\n      limit,\n      log,\n      luminance_x,\n      m,\n      max,\n      multiply,\n      normal,\n      num2rgb,\n      overlay,\n      pow,\n      rgb2cmyk,\n      rgb2css,\n      rgb2hex,\n      rgb2hsi,\n      rgb2hsl,\n      rgb2hsv,\n      rgb2lab,\n      rgb2lch,\n      rgb2luminance,\n      rgb2num,\n      rgb2temperature,\n      rgb2xyz,\n      rgb_xyz,\n      rnd,\n      root,\n      round,\n      screen,\n      sin,\n      sqrt,\n      temperature2rgb,\n      type,\n      unpack,\n      w3cx11,\n      xyz_lab,\n      xyz_rgb,\n      slice = [].slice;\n\n  type = function () {\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n\n    return function (obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  }();\n\n  limit = function (x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n\n    if (max == null) {\n      max = 1;\n    }\n\n    if (x < min) {\n      x = min;\n    }\n\n    if (x > max) {\n      x = max;\n    }\n\n    return x;\n  };\n\n  unpack = function (args) {\n    if (args.length >= 3) {\n      return [].slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function (rgb) {\n    var i;\n\n    for (i in rgb) {\n      if (i < 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n  TWOPI = PI * 2;\n  PITHIRD = PI / 3;\n  DEG2RAD = PI / 180;\n  RAD2DEG = 180 / PI;\n\n  chroma = function () {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, arguments, function () {});\n  };\n\n  _interpolators = [];\n\n  if (typeof module !== \"undefined\" && module !== null && module.exports != null) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.1.1';\n  /**\n      chroma.js\n  \n      Copyright (c) 2011-2013, Gregor Aisch\n      All rights reserved.\n  \n      Redistribution and use in source and binary forms, with or without\n      modification, are permitted provided that the following conditions are met:\n  \n      * Redistributions of source code must retain the above copyright notice, this\n        list of conditions and the following disclaimer.\n  \n      * Redistributions in binary form must reproduce the above copyright notice,\n        this list of conditions and the following disclaimer in the documentation\n        and/or other materials provided with the distribution.\n  \n      * The name Gregor Aisch may not be used to endorse or promote products\n        derived from this software without specific prior written permission.\n  \n      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  \n      @source: https://github.com/gka/chroma.js\n   */\n\n  _input = {};\n  _guess_formats = [];\n  _guess_formats_sorted = false;\n\n  Color = function () {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n\n      mode = args[args.length - 1];\n\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function (a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n\n          if (mode) {\n            break;\n          }\n        }\n\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.alpha = function (alpha) {\n      if (arguments.length) {\n        this._rgb[3] = alpha;\n        return this;\n      }\n\n      return this._rgb[3];\n    };\n\n    Color.prototype.toString = function () {\n      return this.name();\n    };\n\n    return Color;\n  }();\n\n  chroma._input = _input;\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n  w3cx11 = {\n    indigo: \"#4b0082\",\n    gold: \"#ffd700\",\n    hotpink: \"#ff69b4\",\n    firebrick: \"#b22222\",\n    indianred: \"#cd5c5c\",\n    yellow: \"#ffff00\",\n    mistyrose: \"#ffe4e1\",\n    darkolivegreen: \"#556b2f\",\n    olive: \"#808000\",\n    darkseagreen: \"#8fbc8f\",\n    pink: \"#ffc0cb\",\n    tomato: \"#ff6347\",\n    lightcoral: \"#f08080\",\n    orangered: \"#ff4500\",\n    navajowhite: \"#ffdead\",\n    lime: \"#00ff00\",\n    palegreen: \"#98fb98\",\n    darkslategrey: \"#2f4f4f\",\n    greenyellow: \"#adff2f\",\n    burlywood: \"#deb887\",\n    seashell: \"#fff5ee\",\n    mediumspringgreen: \"#00fa9a\",\n    fuchsia: \"#ff00ff\",\n    papayawhip: \"#ffefd5\",\n    blanchedalmond: \"#ffebcd\",\n    chartreuse: \"#7fff00\",\n    dimgray: \"#696969\",\n    black: \"#000000\",\n    peachpuff: \"#ffdab9\",\n    springgreen: \"#00ff7f\",\n    aquamarine: \"#7fffd4\",\n    white: \"#ffffff\",\n    orange: \"#ffa500\",\n    lightsalmon: \"#ffa07a\",\n    darkslategray: \"#2f4f4f\",\n    brown: \"#a52a2a\",\n    ivory: \"#fffff0\",\n    dodgerblue: \"#1e90ff\",\n    peru: \"#cd853f\",\n    lawngreen: \"#7cfc00\",\n    chocolate: \"#d2691e\",\n    crimson: \"#dc143c\",\n    forestgreen: \"#228b22\",\n    darkgrey: \"#a9a9a9\",\n    lightseagreen: \"#20b2aa\",\n    cyan: \"#00ffff\",\n    mintcream: \"#f5fffa\",\n    silver: \"#c0c0c0\",\n    antiquewhite: \"#faebd7\",\n    mediumorchid: \"#ba55d3\",\n    skyblue: \"#87ceeb\",\n    gray: \"#808080\",\n    darkturquoise: \"#00ced1\",\n    goldenrod: \"#daa520\",\n    darkgreen: \"#006400\",\n    floralwhite: \"#fffaf0\",\n    darkviolet: \"#9400d3\",\n    darkgray: \"#a9a9a9\",\n    moccasin: \"#ffe4b5\",\n    saddlebrown: \"#8b4513\",\n    grey: \"#808080\",\n    darkslateblue: \"#483d8b\",\n    lightskyblue: \"#87cefa\",\n    lightpink: \"#ffb6c1\",\n    mediumvioletred: \"#c71585\",\n    slategrey: \"#708090\",\n    red: \"#ff0000\",\n    deeppink: \"#ff1493\",\n    limegreen: \"#32cd32\",\n    darkmagenta: \"#8b008b\",\n    palegoldenrod: \"#eee8aa\",\n    plum: \"#dda0dd\",\n    turquoise: \"#40e0d0\",\n    lightgrey: \"#d3d3d3\",\n    lightgoldenrodyellow: \"#fafad2\",\n    darkgoldenrod: \"#b8860b\",\n    lavender: \"#e6e6fa\",\n    maroon: \"#800000\",\n    yellowgreen: \"#9acd32\",\n    sandybrown: \"#f4a460\",\n    thistle: \"#d8bfd8\",\n    violet: \"#ee82ee\",\n    navy: \"#000080\",\n    magenta: \"#ff00ff\",\n    dimgrey: \"#696969\",\n    tan: \"#d2b48c\",\n    rosybrown: \"#bc8f8f\",\n    olivedrab: \"#6b8e23\",\n    blue: \"#0000ff\",\n    lightblue: \"#add8e6\",\n    ghostwhite: \"#f8f8ff\",\n    honeydew: \"#f0fff0\",\n    cornflowerblue: \"#6495ed\",\n    slateblue: \"#6a5acd\",\n    linen: \"#faf0e6\",\n    darkblue: \"#00008b\",\n    powderblue: \"#b0e0e6\",\n    seagreen: \"#2e8b57\",\n    darkkhaki: \"#bdb76b\",\n    snow: \"#fffafa\",\n    sienna: \"#a0522d\",\n    mediumblue: \"#0000cd\",\n    royalblue: \"#4169e1\",\n    lightcyan: \"#e0ffff\",\n    green: \"#008000\",\n    mediumpurple: \"#9370db\",\n    midnightblue: \"#191970\",\n    cornsilk: \"#fff8dc\",\n    paleturquoise: \"#afeeee\",\n    bisque: \"#ffe4c4\",\n    slategray: \"#708090\",\n    darkcyan: \"#008b8b\",\n    khaki: \"#f0e68c\",\n    wheat: \"#f5deb3\",\n    teal: \"#008080\",\n    darkorchid: \"#9932cc\",\n    deepskyblue: \"#00bfff\",\n    salmon: \"#fa8072\",\n    darkred: \"#8b0000\",\n    steelblue: \"#4682b4\",\n    palevioletred: \"#db7093\",\n    lightslategray: \"#778899\",\n    aliceblue: \"#f0f8ff\",\n    lightslategrey: \"#778899\",\n    lightgreen: \"#90ee90\",\n    orchid: \"#da70d6\",\n    gainsboro: \"#dcdcdc\",\n    mediumseagreen: \"#3cb371\",\n    lightgray: \"#d3d3d3\",\n    mediumturquoise: \"#48d1cc\",\n    lemonchiffon: \"#fffacd\",\n    cadetblue: \"#5f9ea0\",\n    lightyellow: \"#ffffe0\",\n    lavenderblush: \"#fff0f5\",\n    coral: \"#ff7f50\",\n    purple: \"#800080\",\n    aqua: \"#00ffff\",\n    whitesmoke: \"#f5f5f5\",\n    mediumslateblue: \"#7b68ee\",\n    darkorange: \"#ff8c00\",\n    mediumaquamarine: \"#66cdaa\",\n    darksalmon: \"#e9967a\",\n    beige: \"#f5f5dc\",\n    blueviolet: \"#8a2be2\",\n    azure: \"#f0ffff\",\n    lightsteelblue: \"#b0c4de\",\n    oldlace: \"#fdf5e6\",\n    rebeccapurple: \"#663399\"\n  };\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function () {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    r = limit(r, 0, 255);\n    g = limit(g, 0, 255);\n    b = limit(b, 0, 255);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function (r) {\n    return round(255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055));\n  };\n\n  lab_xyz = function (t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function () {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function (r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function (t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function () {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['lab']), function () {});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function () {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function (colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n\n    colors = function () {\n      var len, o, results;\n      results = [];\n\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n\n      return results;\n    }();\n\n    if (colors.length === 2) {\n      ref = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref[0], lab1 = ref[1];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n\n      I = function (t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n\n    return I;\n  };\n\n  chroma.bezier = function (colors) {\n    var f;\n    f = bezier(colors);\n\n    f.scale = function () {\n      return chroma.scale(f);\n    };\n\n    return f;\n  };\n  /*\n      chroma.js\n  \n      Copyright (c) 2011-2013, Gregor Aisch\n      All rights reserved.\n  \n      Redistribution and use in source and binary forms, with or without\n      modification, are permitted provided that the following conditions are met:\n  \n      * Redistributions of source code must retain the above copyright notice, this\n        list of conditions and the following disclaimer.\n  \n      * Redistributions in binary form must reproduce the above copyright notice,\n        this list of conditions and the following disclaimer in the documentation\n        and/or other materials provided with the distribution.\n  \n      * The name Gregor Aisch may not be used to endorse or promote products\n        derived from this software without specific prior written permission.\n  \n      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  \n      @source: https://github.com/gka/chroma.js\n   */\n\n\n  chroma.cubehelix = function (start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n\n    if (start == null) {\n      start = 300;\n    }\n\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n\n    if (hue == null) {\n      hue = 1;\n    }\n\n    if (gamma == null) {\n      gamma = 1;\n    }\n\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n\n    dl = lightness[1] - lightness[0];\n    dh = 0;\n\n    f = function (fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255]));\n    };\n\n    f.start = function (s) {\n      if (s == null) {\n        return start;\n      }\n\n      start = s;\n      return f;\n    };\n\n    f.rotations = function (r) {\n      if (r == null) {\n        return rotations;\n      }\n\n      rotations = r;\n      return f;\n    };\n\n    f.gamma = function (g) {\n      if (g == null) {\n        return gamma;\n      }\n\n      gamma = g;\n      return f;\n    };\n\n    f.hue = function (h) {\n      if (h == null) {\n        return hue;\n      }\n\n      hue = h;\n\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n\n      return f;\n    };\n\n    f.lightness = function (h) {\n      if (h == null) {\n        return lightness;\n      }\n\n      lightness = h;\n\n      if (type(lightness) === 'array') {\n        dl = lightness[1] - lightness[0];\n\n        if (dl === 0) {\n          lightness = lightness[1];\n        }\n      } else {\n        dl = 0;\n      }\n\n      return f;\n    };\n\n    f.scale = function () {\n      return chroma.scale(f);\n    };\n\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function () {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n\n    return new Color(code);\n  };\n\n  _input.rgb = function () {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n\n    return results;\n  };\n\n  chroma.rgb = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['rgb']), function () {});\n  };\n\n  Color.prototype.rgb = function () {\n    return this._rgb.slice(0, 3);\n  };\n\n  Color.prototype.rgba = function () {\n    return this._rgb;\n  };\n\n  _guess_formats.push({\n    p: 15,\n    test: function (n) {\n      var a;\n      a = unpack(arguments);\n\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  hex2rgb = function (hex) {\n    var a, b, g, r, rgb, u;\n\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n\n    if (_input.css != null && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function (channels, mode) {\n    var a, b, g, hxa, r, str, u;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + function () {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n\n        case 'argb':\n          return hxa + str;\n\n        default:\n          return str;\n      }\n    }();\n  };\n\n  _input.hex = function (h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hex']), function () {});\n  };\n\n  Color.prototype.hex = function (mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 10,\n    test: function (n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function () {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * (2 / 3 - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function (r, g, b) {\n    var h, l, min, ref, s;\n\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n\n    h *= 60;\n\n    if (h < 0) {\n      h += 360;\n    }\n\n    return [h, s, l];\n  };\n\n  chroma.hsl = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsl']), function () {});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function () {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function () {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n\n      if (h > 360) {\n        h -= 360;\n      }\n\n      if (h < 0) {\n        h += 360;\n      }\n\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n\n    r = round(r);\n    g = round(g);\n    b = round(b);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function () {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n\n      h *= 60;\n\n      if (h < 0) {\n        h += 360;\n      }\n    }\n\n    return [h, s, v];\n  };\n\n  chroma.hsv = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsv']), function () {});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function () {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function (num) {\n    var b, g, r;\n\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = num >> 8 & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function () {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function (num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function (mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 10,\n    test: function (n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  css2rgb = function (css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n\n    if (chroma.colors != null && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n\n    return rgb;\n  };\n\n  rgb2css = function (rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {}\n  };\n\n  rnd = function (a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function (hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function (h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['css']), function () {});\n  };\n\n  Color.prototype.css = function (mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function (name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 20,\n    test: function (n) {\n      if (arguments.length === 1 && w3cx11[n] != null) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function (n) {\n    var h, k;\n\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n\n      this._rgb[3] = 1;\n      this;\n    }\n\n    h = this.hex();\n\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n\n    return h;\n  };\n\n  lch2lab = function () {\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function () {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [limit(r, 0, 255), limit(g, 0, 255), limit(b, 0, 255), args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function () {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n\n    return [l, c, h];\n  };\n\n  rgb2lch = function () {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function () {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function () {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function () {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function () {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function () {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function (mode) {\n    var b, c, f, g, k, m, r, ref, y;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function () {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n\n    r = c >= 1 ? 0 : round(255 * (1 - c) * (1 - k));\n    g = m >= 1 ? 0 : round(255 * (1 - m) * (1 - k));\n    b = y >= 1 ? 0 : round(255 * (1 - y) * (1 - k));\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function () {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['cmyk']), function () {});\n  };\n\n  Color.prototype.cmyk = function () {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function () {\n    var i, k, o, rgb, v;\n\n    rgb = function () {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n\n      return results;\n    }.apply(this, arguments);\n\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n\n    return rgb;\n  };\n\n  chroma.gl = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['gl']), function () {});\n  };\n\n  Color.prototype.gl = function () {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function (r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function (x) {\n    x /= 255;\n\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  _interpolators = [];\n\n  interpolate = function (col1, col2, f, m) {\n    var interpol, len, o, res;\n\n    if (f == null) {\n      f = 0.5;\n    }\n\n    if (m == null) {\n      m = 'rgb';\n    }\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n\n\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n\n    res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n    return res;\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function (col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  interpolate_rgb = function (col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function (lum, mode) {\n    var cur_lum, eps, max_iter, test;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n\n    if (lum === 0) {\n      this._rgb = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      this._rgb = [255, 255, 255, this._rgb[3]];\n    } else {\n      eps = 1e-7;\n      max_iter = 20;\n\n      test = function (l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n\n        if (lm > lum) {\n          return test(l, m);\n        }\n\n        return test(m, h);\n      };\n\n      cur_lum = rgb2luminance(this._rgb);\n      this._rgb = (cur_lum > lum ? test(chroma('black'), this) : test(this, chroma('white'))).rgba();\n    }\n\n    return this;\n  };\n\n  temperature2rgb = function (kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n\n    return clip_rgb([r, g, b]);\n  };\n\n  rgb2temperature = function () {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n\n      if (rgb[2] / rgb[0] >= b / r) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['temperature']), function () {});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function () {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function (a, b) {\n    var l1, l2, ref, ref1;\n\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n\n    l1 = a.luminance();\n    l2 = b.luminance();\n\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  Color.prototype.get = function (modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n\n    if (channel) {\n      i = mode.indexOf(channel);\n\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function (modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n\n            case '-':\n              src[i] += +value;\n              break;\n\n            case '*':\n              src[i] *= +value.substr(1);\n              break;\n\n            case '/':\n              src[i] /= +value.substr(1);\n              break;\n\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n\n    me._rgb = chroma(src, mode).alpha(me.alpha())._rgb;\n    return me;\n  };\n\n  Color.prototype.darken = function (amount) {\n    var lab, me;\n\n    if (amount == null) {\n      amount = 1;\n    }\n\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function (amount) {\n    var lch, me;\n\n    if (amount == null) {\n      amount = 1;\n    }\n\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function () {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function (bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function (f) {\n    return function (bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function (f) {\n    return function (c0, c1) {\n      var i, o, out;\n      out = [];\n\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n\n      return out;\n    };\n  };\n\n  normal = function (a, b) {\n    return a;\n  };\n\n  multiply = function (a, b) {\n    return a * b / 255;\n  };\n\n  darken = function (a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function (a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function (a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function (a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function (a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function (a, b) {\n    if (a === 255) {\n      return 255;\n    }\n\n    a = 255 * (b / 255) / (1 - a / 255);\n\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n  blend.multiply = blend_f(each(multiply));\n  blend.screen = blend_f(each(screen));\n  blend.overlay = blend_f(each(overlay));\n  blend.darken = blend_f(each(darken));\n  blend.lighten = blend_f(each(lighten));\n  blend.dodge = blend_f(each(dodge));\n  blend.burn = blend_f(each(burn));\n  chroma.blend = blend;\n\n  chroma.analyze = function (data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n\n      if (val != null && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n\n        if (val < r.min) {\n          r.min = val;\n        }\n\n        if (val > r.max) {\n          r.max = val;\n        }\n\n        r.count += 1;\n      }\n    }\n\n    r.domain = [r.min, r.max];\n\n    r.limits = function (mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n\n    return r;\n  };\n\n  chroma.scale = function (colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n\n    setColors = function (colors) {\n      var c, col, o, ref, ref1, ref2, w;\n\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n\n      if (colors != null && type(colors) === 'string' && ((ref = chroma.brewer) != null ? ref[colors] : void 0) != null) {\n        colors = chroma.brewer[colors];\n      }\n\n      if (type(colors) === 'array') {\n        colors = colors.slice(0);\n\n        for (c = o = 0, ref1 = colors.length - 1; 0 <= ref1 ? o <= ref1 : o >= ref1; c = 0 <= ref1 ? ++o : --o) {\n          col = colors[c];\n\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n\n        _pos.length = 0;\n\n        for (c = w = 0, ref2 = colors.length - 1; 0 <= ref2 ? w <= ref2 : w >= ref2; c = 0 <= ref2 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n\n      resetCache();\n      return _colors = colors;\n    };\n\n    getClass = function (value) {\n      var i, n;\n\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n\n        return i - 1;\n      }\n\n      return 0;\n    };\n\n    tmap = function (t) {\n      return t;\n    };\n\n    classifyValue = function (value) {\n      var i, maxc, minc, n, val;\n      val = value;\n\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + (_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc) * (_max - _min);\n      }\n\n      return val;\n    };\n\n    getColor = function (val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n\n      if (isNaN(val)) {\n        return _nacol;\n      }\n\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n          t = _padding[0] + t * (1 - _padding[0] - _padding[1]);\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n          t = _padding[0] + t * (1 - _padding[0] - _padding[1]);\n          t = Math.min(1, Math.max(0, t));\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n\n      k = Math.floor(t * 10000);\n\n      if (_colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n\n        _colorCache[k] = col;\n      }\n\n      return col;\n    };\n\n    resetCache = function () {\n      return _colorCache = {};\n    };\n\n    setColors(colors);\n\n    f = function (v) {\n      var c;\n      c = chroma(getColor(v));\n\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n\n    f.classes = function (classes) {\n      var d;\n\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n\n        return f;\n      }\n\n      return _classes;\n    };\n\n    f.domain = function (domain) {\n      var c, d, k, len, o, ref, w;\n\n      if (!arguments.length) {\n        return _domain;\n      }\n\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n\n      _domain = [_min, _max];\n      return f;\n    };\n\n    f.mode = function (_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n\n    f.range = function (colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n\n    f.out = function (_o) {\n      _out = _o;\n      return f;\n    };\n\n    f.spread = function (val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n\n      _spread = val;\n      return f;\n    };\n\n    f.correctLightness = function (v) {\n      if (v == null) {\n        v = true;\n      }\n\n      _correctLightness = v;\n      resetCache();\n\n      if (_correctLightness) {\n        tmap = function (t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function () {\n              if (pol) {\n                L_diff *= -1;\n              }\n\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n\n          return t;\n        };\n      } else {\n        tmap = function (t) {\n          return t;\n        };\n      }\n\n      return f;\n    };\n\n    f.padding = function (p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n\n    f.colors = function () {\n      var dd, dm, i, numColors, o, out, ref, results, samples, w;\n      numColors = 0;\n      out = 'hex';\n\n      if (arguments.length === 1) {\n        if (type(arguments[0]) === 'string') {\n          out = arguments[0];\n        } else {\n          numColors = arguments[0];\n        }\n      }\n\n      if (arguments.length === 2) {\n        numColors = arguments[0], out = arguments[1];\n      }\n\n      if (numColors) {\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n        return function () {\n          results = [];\n\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--) {\n            results.push(o);\n          }\n\n          return results;\n        }.apply(this).map(function (i) {\n          return f(dm + i / (numColors - 1) * dd)[out]();\n        });\n      }\n\n      colors = [];\n      samples = [];\n\n      if (_classes && _classes.length > 2) {\n        for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n          samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n        }\n      } else {\n        samples = _domain;\n      }\n\n      return samples.map(function (v) {\n        return f(v)[out]();\n      });\n    };\n\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function () {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function () {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function (data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n\n    if (filter == null) {\n      filter = function () {\n        return true;\n      };\n    }\n\n    add = function (val) {\n      if (val != null && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n\n        if (val < r.min) {\n          r.min = val;\n        }\n\n        if (val > r.max) {\n          r.max = val;\n        }\n\n        r.count += 1;\n      }\n    };\n\n    visit = function (val, k) {\n      if (filter(val, k)) {\n        if (key != null && type(key) === 'function') {\n          return add(key(val));\n        } else if (key != null && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n\n    r.domain = [r.min, r.max];\n\n    r.limits = function (mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n\n    return r;\n  };\n\n  chroma.limits = function (data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, value, values, w;\n\n    if (mode == null) {\n      mode = 'equal';\n    }\n\n    if (num == null) {\n      num = 7;\n    }\n\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function (a, b) {\n      return a - b;\n    });\n    limits = [];\n\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + i / num * (max - min));\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + i / num * (max_log - min_log)));\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = values.length * i / num;\n        pb = floor(p);\n\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * pr + values[pb + 1] * (1 - pr));\n        }\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + i / num * (max - min));\n      }\n\n      centroids.push(max);\n\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n\n        newCentroids = new Array(num);\n\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n\n        repeat = false;\n\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n\n        centroids = newCentroids;\n        nb_iters++;\n\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n\n      kClusters = {};\n\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n\n      tmpKMeansBreaks = [];\n\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function (a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        if (!isNaN(tmpKMeansBreaks[i])) {\n          limits.push(tmpKMeansBreaks[i]);\n        }\n      }\n    }\n\n    return limits;\n  };\n\n  hsi2rgb = function (h, s, i) {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n    h /= 360;\n\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function () {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = (r - g + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n\n      if (b > g) {\n        h = TWOPI - h;\n      }\n\n      h /= TWOPI;\n    }\n\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsi']), function () {});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function () {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function (col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat(function () {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch'];\n    results = [];\n\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n\n    return results;\n  }());\n\n  interpolate_num = function (col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function (col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n}).call(this);","map":{"version":3,"sources":["/home/ishita/Desktop/part-time/BESR_DASHBOARD/Dashboard_CTIL/tester/node_modules/chroma-js/chroma.js"],"names":["Color","DEG2RAD","LAB_CONSTANTS","PI","PITHIRD","RAD2DEG","TWOPI","_guess_formats","_guess_formats_sorted","_input","_interpolators","abs","atan2","bezier","blend","blend_f","brewer","burn","chroma","clip_rgb","cmyk2rgb","colors","cos","css2rgb","darken","dodge","each","floor","hex2rgb","hsi2rgb","hsl2css","hsl2rgb","hsv2rgb","interpolate","interpolate_hsx","interpolate_lab","interpolate_num","interpolate_rgb","lab2lch","lab2rgb","lab_xyz","lch2lab","lch2rgb","lighten","limit","log","luminance_x","m","max","multiply","normal","num2rgb","overlay","pow","rgb2cmyk","rgb2css","rgb2hex","rgb2hsi","rgb2hsl","rgb2hsv","rgb2lab","rgb2lch","rgb2luminance","rgb2num","rgb2temperature","rgb2xyz","rgb_xyz","rnd","root","round","screen","sin","sqrt","temperature2rgb","type","unpack","w3cx11","xyz_lab","xyz_rgb","slice","classToType","len","name","o","ref","split","length","toLowerCase","obj","strType","Object","prototype","toString","call","x","min","args","rgb","i","Math","arguments","func","ctor","child","result","apply","module","exports","define","amd","version","arg","chk","len1","me","mode","w","push","_rgb","sort","a","b","p","test","console","warn","alpha","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","indigo","gold","hotpink","firebrick","indianred","yellow","mistyrose","darkolivegreen","olive","darkseagreen","pink","tomato","lightcoral","orangered","navajowhite","lime","palegreen","darkslategrey","greenyellow","burlywood","seashell","mediumspringgreen","fuchsia","papayawhip","blanchedalmond","chartreuse","dimgray","black","peachpuff","springgreen","aquamarine","white","orange","lightsalmon","darkslategray","brown","ivory","dodgerblue","peru","lawngreen","chocolate","crimson","forestgreen","darkgrey","lightseagreen","cyan","mintcream","silver","antiquewhite","mediumorchid","skyblue","gray","darkturquoise","goldenrod","darkgreen","floralwhite","darkviolet","darkgray","moccasin","saddlebrown","grey","darkslateblue","lightskyblue","lightpink","mediumvioletred","slategrey","red","deeppink","limegreen","darkmagenta","palegoldenrod","plum","turquoise","lightgrey","lightgoldenrodyellow","darkgoldenrod","lavender","maroon","yellowgreen","sandybrown","thistle","violet","navy","magenta","dimgrey","tan","rosybrown","olivedrab","blue","lightblue","ghostwhite","honeydew","cornflowerblue","slateblue","linen","darkblue","powderblue","seagreen","darkkhaki","snow","sienna","mediumblue","royalblue","lightcyan","green","mediumpurple","midnightblue","cornsilk","paleturquoise","bisque","slategray","darkcyan","khaki","wheat","teal","darkorchid","deepskyblue","salmon","darkred","steelblue","palevioletred","lightslategray","aliceblue","lightslategrey","lightgreen","orchid","gainsboro","mediumseagreen","lightgray","mediumturquoise","lemonchiffon","cadetblue","lightyellow","lavenderblush","coral","purple","aqua","whitesmoke","mediumslateblue","darkorange","mediumaquamarine","darksalmon","beige","blueviolet","azure","lightsteelblue","oldlace","rebeccapurple","g","l","r","y","z","isNaN","Yn","Xn","Zn","t","t1","t2","t0","Kn","t3","ref1","lab","concat","I","I0","I1","c","lab0","lab1","lab2","lab3","ref2","results","f","scale","cubehelix","start","rotations","hue","gamma","lightness","dh","dl","fract","amp","cos_a","h","sin_a","s","random","code","digits","charAt","k","v","rgba","n","hex","u","match","substr","parseInt","css","channels","hxa","str","Number","NaN","hsl","q","ref3","ref4","ref5","delta","hsv","num","aa","ab","map","join","named","L","lch","hcl","reverse","cmyk","gl","col1","col2","interpol","res","mix","xyz0","xyz1","luminance","lum","cur_lum","eps","max_iter","lm","kelvin","temp","maxTemp","minTemp","temperature","K","contrast","l1","l2","get","modechan","channel","src","indexOf","set","value","amount","brighten","darker","brighter","saturate","desaturate","premultiply","bottom","top","c0","c1","out","analyze","data","val","MAX_VALUE","sum","values","count","domain","limits","positions","_classes","_colorCache","_colors","_correctLightness","_domain","_fixed","_max","_min","_mode","_nacol","_out","_padding","_pos","_spread","classifyValue","getClass","getColor","resetCache","setColors","tmap","col","maxc","minc","bypassMap","classes","d","_m","range","_o","spread","correctLightness","L0","L1","L_actual","L_diff","L_ideal","pol","padding","dd","dm","numColors","samples","scales","cool","hot","key","filter","add","visit","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","assignments","best","centroids","cluster","clusterSizes","dist","j","kClusters","max_log","min_log","mindist","nb_iters","newCentroids","pb","pr","ref10","ref11","ref12","ref13","ref14","ref6","ref7","ref8","ref9","repeat","tmpKMeansBreaks","LOG10E","Array","acos","hsi","hue0","hue1","lbv","lbv0","lbv1","sat","sat0","sat1","n1","n2"],"mappings":"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","sourcesContent":["\n/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2015, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\n(function() {\n  var Color, DEG2RAD, LAB_CONSTANTS, PI, PITHIRD, RAD2DEG, TWOPI, _guess_formats, _guess_formats_sorted, _input, _interpolators, abs, atan2, bezier, blend, blend_f, brewer, burn, chroma, clip_rgb, cmyk2rgb, colors, cos, css2rgb, darken, dodge, each, floor, hex2rgb, hsi2rgb, hsl2css, hsl2rgb, hsv2rgb, interpolate, interpolate_hsx, interpolate_lab, interpolate_num, interpolate_rgb, lab2lch, lab2rgb, lab_xyz, lch2lab, lch2rgb, lighten, limit, log, luminance_x, m, max, multiply, normal, num2rgb, overlay, pow, rgb2cmyk, rgb2css, rgb2hex, rgb2hsi, rgb2hsl, rgb2hsv, rgb2lab, rgb2lch, rgb2luminance, rgb2num, rgb2temperature, rgb2xyz, rgb_xyz, rnd, root, round, screen, sin, sqrt, temperature2rgb, type, unpack, w3cx11, xyz_lab, xyz_rgb,\n    slice = [].slice;\n\n  type = (function() {\n\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n    return function(obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  })();\n\n  limit = function(x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n    if (max == null) {\n      max = 1;\n    }\n    if (x < min) {\n      x = min;\n    }\n    if (x > max) {\n      x = max;\n    }\n    return x;\n  };\n\n  unpack = function(args) {\n    if (args.length >= 3) {\n      return [].slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function(rgb) {\n    var i;\n    for (i in rgb) {\n      if (i < 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n\n  TWOPI = PI * 2;\n\n  PITHIRD = PI / 3;\n\n  DEG2RAD = PI / 180;\n\n  RAD2DEG = 180 / PI;\n\n  chroma = function() {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, arguments, function(){});\n  };\n\n  _interpolators = [];\n\n  if ((typeof module !== \"undefined\" && module !== null) && (module.exports != null)) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.1.1';\n\n\n  /**\n      chroma.js\n  \n      Copyright (c) 2011-2013, Gregor Aisch\n      All rights reserved.\n  \n      Redistribution and use in source and binary forms, with or without\n      modification, are permitted provided that the following conditions are met:\n  \n      * Redistributions of source code must retain the above copyright notice, this\n        list of conditions and the following disclaimer.\n  \n      * Redistributions in binary form must reproduce the above copyright notice,\n        this list of conditions and the following disclaimer in the documentation\n        and/or other materials provided with the distribution.\n  \n      * The name Gregor Aisch may not be used to endorse or promote products\n        derived from this software without specific prior written permission.\n  \n      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  \n      @source: https://github.com/gka/chroma.js\n   */\n\n  _input = {};\n\n  _guess_formats = [];\n\n  _guess_formats_sorted = false;\n\n  Color = (function() {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n      mode = args[args.length - 1];\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function(a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n          if (mode) {\n            break;\n          }\n        }\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.alpha = function(alpha) {\n      if (arguments.length) {\n        this._rgb[3] = alpha;\n        return this;\n      }\n      return this._rgb[3];\n    };\n\n    Color.prototype.toString = function() {\n      return this.name();\n    };\n\n    return Color;\n\n  })();\n\n  chroma._input = _input;\n\n\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n\n\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n  w3cx11 = {\n    indigo: \"#4b0082\",\n    gold: \"#ffd700\",\n    hotpink: \"#ff69b4\",\n    firebrick: \"#b22222\",\n    indianred: \"#cd5c5c\",\n    yellow: \"#ffff00\",\n    mistyrose: \"#ffe4e1\",\n    darkolivegreen: \"#556b2f\",\n    olive: \"#808000\",\n    darkseagreen: \"#8fbc8f\",\n    pink: \"#ffc0cb\",\n    tomato: \"#ff6347\",\n    lightcoral: \"#f08080\",\n    orangered: \"#ff4500\",\n    navajowhite: \"#ffdead\",\n    lime: \"#00ff00\",\n    palegreen: \"#98fb98\",\n    darkslategrey: \"#2f4f4f\",\n    greenyellow: \"#adff2f\",\n    burlywood: \"#deb887\",\n    seashell: \"#fff5ee\",\n    mediumspringgreen: \"#00fa9a\",\n    fuchsia: \"#ff00ff\",\n    papayawhip: \"#ffefd5\",\n    blanchedalmond: \"#ffebcd\",\n    chartreuse: \"#7fff00\",\n    dimgray: \"#696969\",\n    black: \"#000000\",\n    peachpuff: \"#ffdab9\",\n    springgreen: \"#00ff7f\",\n    aquamarine: \"#7fffd4\",\n    white: \"#ffffff\",\n    orange: \"#ffa500\",\n    lightsalmon: \"#ffa07a\",\n    darkslategray: \"#2f4f4f\",\n    brown: \"#a52a2a\",\n    ivory: \"#fffff0\",\n    dodgerblue: \"#1e90ff\",\n    peru: \"#cd853f\",\n    lawngreen: \"#7cfc00\",\n    chocolate: \"#d2691e\",\n    crimson: \"#dc143c\",\n    forestgreen: \"#228b22\",\n    darkgrey: \"#a9a9a9\",\n    lightseagreen: \"#20b2aa\",\n    cyan: \"#00ffff\",\n    mintcream: \"#f5fffa\",\n    silver: \"#c0c0c0\",\n    antiquewhite: \"#faebd7\",\n    mediumorchid: \"#ba55d3\",\n    skyblue: \"#87ceeb\",\n    gray: \"#808080\",\n    darkturquoise: \"#00ced1\",\n    goldenrod: \"#daa520\",\n    darkgreen: \"#006400\",\n    floralwhite: \"#fffaf0\",\n    darkviolet: \"#9400d3\",\n    darkgray: \"#a9a9a9\",\n    moccasin: \"#ffe4b5\",\n    saddlebrown: \"#8b4513\",\n    grey: \"#808080\",\n    darkslateblue: \"#483d8b\",\n    lightskyblue: \"#87cefa\",\n    lightpink: \"#ffb6c1\",\n    mediumvioletred: \"#c71585\",\n    slategrey: \"#708090\",\n    red: \"#ff0000\",\n    deeppink: \"#ff1493\",\n    limegreen: \"#32cd32\",\n    darkmagenta: \"#8b008b\",\n    palegoldenrod: \"#eee8aa\",\n    plum: \"#dda0dd\",\n    turquoise: \"#40e0d0\",\n    lightgrey: \"#d3d3d3\",\n    lightgoldenrodyellow: \"#fafad2\",\n    darkgoldenrod: \"#b8860b\",\n    lavender: \"#e6e6fa\",\n    maroon: \"#800000\",\n    yellowgreen: \"#9acd32\",\n    sandybrown: \"#f4a460\",\n    thistle: \"#d8bfd8\",\n    violet: \"#ee82ee\",\n    navy: \"#000080\",\n    magenta: \"#ff00ff\",\n    dimgrey: \"#696969\",\n    tan: \"#d2b48c\",\n    rosybrown: \"#bc8f8f\",\n    olivedrab: \"#6b8e23\",\n    blue: \"#0000ff\",\n    lightblue: \"#add8e6\",\n    ghostwhite: \"#f8f8ff\",\n    honeydew: \"#f0fff0\",\n    cornflowerblue: \"#6495ed\",\n    slateblue: \"#6a5acd\",\n    linen: \"#faf0e6\",\n    darkblue: \"#00008b\",\n    powderblue: \"#b0e0e6\",\n    seagreen: \"#2e8b57\",\n    darkkhaki: \"#bdb76b\",\n    snow: \"#fffafa\",\n    sienna: \"#a0522d\",\n    mediumblue: \"#0000cd\",\n    royalblue: \"#4169e1\",\n    lightcyan: \"#e0ffff\",\n    green: \"#008000\",\n    mediumpurple: \"#9370db\",\n    midnightblue: \"#191970\",\n    cornsilk: \"#fff8dc\",\n    paleturquoise: \"#afeeee\",\n    bisque: \"#ffe4c4\",\n    slategray: \"#708090\",\n    darkcyan: \"#008b8b\",\n    khaki: \"#f0e68c\",\n    wheat: \"#f5deb3\",\n    teal: \"#008080\",\n    darkorchid: \"#9932cc\",\n    deepskyblue: \"#00bfff\",\n    salmon: \"#fa8072\",\n    darkred: \"#8b0000\",\n    steelblue: \"#4682b4\",\n    palevioletred: \"#db7093\",\n    lightslategray: \"#778899\",\n    aliceblue: \"#f0f8ff\",\n    lightslategrey: \"#778899\",\n    lightgreen: \"#90ee90\",\n    orchid: \"#da70d6\",\n    gainsboro: \"#dcdcdc\",\n    mediumseagreen: \"#3cb371\",\n    lightgray: \"#d3d3d3\",\n    mediumturquoise: \"#48d1cc\",\n    lemonchiffon: \"#fffacd\",\n    cadetblue: \"#5f9ea0\",\n    lightyellow: \"#ffffe0\",\n    lavenderblush: \"#fff0f5\",\n    coral: \"#ff7f50\",\n    purple: \"#800080\",\n    aqua: \"#00ffff\",\n    whitesmoke: \"#f5f5f5\",\n    mediumslateblue: \"#7b68ee\",\n    darkorange: \"#ff8c00\",\n    mediumaquamarine: \"#66cdaa\",\n    darksalmon: \"#e9967a\",\n    beige: \"#f5f5dc\",\n    blueviolet: \"#8a2be2\",\n    azure: \"#f0ffff\",\n    lightsteelblue: \"#b0c4de\",\n    oldlace: \"#fdf5e6\",\n    rebeccapurple: \"#663399\"\n  };\n\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function() {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    r = limit(r, 0, 255);\n    g = limit(g, 0, 255);\n    b = limit(b, 0, 255);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function(r) {\n    return round(255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055));\n  };\n\n  lab_xyz = function(t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function() {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function(r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function(t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function() {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['lab']), function(){});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function() {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function(colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n    colors = (function() {\n      var len, o, results;\n      results = [];\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n      return results;\n    })();\n    if (colors.length === 2) {\n      ref = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref[0], lab1 = ref[1];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n      I = function(t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n    return I;\n  };\n\n  chroma.bezier = function(colors) {\n    var f;\n    f = bezier(colors);\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    return f;\n  };\n\n\n  /*\n      chroma.js\n  \n      Copyright (c) 2011-2013, Gregor Aisch\n      All rights reserved.\n  \n      Redistribution and use in source and binary forms, with or without\n      modification, are permitted provided that the following conditions are met:\n  \n      * Redistributions of source code must retain the above copyright notice, this\n        list of conditions and the following disclaimer.\n  \n      * Redistributions in binary form must reproduce the above copyright notice,\n        this list of conditions and the following disclaimer in the documentation\n        and/or other materials provided with the distribution.\n  \n      * The name Gregor Aisch may not be used to endorse or promote products\n        derived from this software without specific prior written permission.\n  \n      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  \n      @source: https://github.com/gka/chroma.js\n   */\n\n  chroma.cubehelix = function(start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n    if (start == null) {\n      start = 300;\n    }\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n    if (hue == null) {\n      hue = 1;\n    }\n    if (gamma == null) {\n      gamma = 1;\n    }\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n    dl = lightness[1] - lightness[0];\n    dh = 0;\n    f = function(fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255]));\n    };\n    f.start = function(s) {\n      if (s == null) {\n        return start;\n      }\n      start = s;\n      return f;\n    };\n    f.rotations = function(r) {\n      if (r == null) {\n        return rotations;\n      }\n      rotations = r;\n      return f;\n    };\n    f.gamma = function(g) {\n      if (g == null) {\n        return gamma;\n      }\n      gamma = g;\n      return f;\n    };\n    f.hue = function(h) {\n      if (h == null) {\n        return hue;\n      }\n      hue = h;\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n      return f;\n    };\n    f.lightness = function(h) {\n      if (h == null) {\n        return lightness;\n      }\n      lightness = h;\n      if (type(lightness) === 'array') {\n        dl = lightness[1] - lightness[0];\n        if (dl === 0) {\n          lightness = lightness[1];\n        }\n      } else {\n        dl = 0;\n      }\n      return f;\n    };\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function() {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n    return new Color(code);\n  };\n\n  _input.rgb = function() {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n    return results;\n  };\n\n  chroma.rgb = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['rgb']), function(){});\n  };\n\n  Color.prototype.rgb = function() {\n    return this._rgb.slice(0, 3);\n  };\n\n  Color.prototype.rgba = function() {\n    return this._rgb;\n  };\n\n  _guess_formats.push({\n    p: 15,\n    test: function(n) {\n      var a;\n      a = unpack(arguments);\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  hex2rgb = function(hex) {\n    var a, b, g, r, rgb, u;\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n    if ((_input.css != null) && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function(channels, mode) {\n    var a, b, g, hxa, r, str, u;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + (function() {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n        case 'argb':\n          return hxa + str;\n        default:\n          return str;\n      }\n    })();\n  };\n\n  _input.hex = function(h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hex']), function(){});\n  };\n\n  Color.prototype.hex = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 10,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function() {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function(r, g, b) {\n    var h, l, min, ref, s;\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n    h *= 60;\n    if (h < 0) {\n      h += 360;\n    }\n    return [h, s, l];\n  };\n\n  chroma.hsl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsl']), function(){});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function() {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function() {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    r = round(r);\n    g = round(g);\n    b = round(b);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function() {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, s, v];\n  };\n\n  chroma.hsv = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsv']), function(){});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function() {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function(num) {\n    var b, g, r;\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = (num >> 8) & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function() {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function(num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 10,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  css2rgb = function(css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n    if ((chroma.colors != null) && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n    return rgb;\n  };\n\n  rgb2css = function(rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {\n\n    }\n  };\n\n  rnd = function(a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function(hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function(h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['css']), function(){});\n  };\n\n  Color.prototype.css = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function(name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 20,\n    test: function(n) {\n      if (arguments.length === 1 && (w3cx11[n] != null)) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function(n) {\n    var h, k;\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n      this._rgb[3] = 1;\n      this;\n    }\n    h = this.hex();\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n    return h;\n  };\n\n  lch2lab = function() {\n\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function() {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [limit(r, 0, 255), limit(g, 0, 255), limit(b, 0, 255), args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function() {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n    return [l, c, h];\n  };\n\n  rgb2lch = function() {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function() {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function() {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function() {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function(mode) {\n    var b, c, f, g, k, m, r, ref, y;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function() {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n    r = c >= 1 ? 0 : round(255 * (1 - c) * (1 - k));\n    g = m >= 1 ? 0 : round(255 * (1 - m) * (1 - k));\n    b = y >= 1 ? 0 : round(255 * (1 - y) * (1 - k));\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function() {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['cmyk']), function(){});\n  };\n\n  Color.prototype.cmyk = function() {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function() {\n    var i, k, o, rgb, v;\n    rgb = (function() {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n      return results;\n    }).apply(this, arguments);\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n    return rgb;\n  };\n\n  chroma.gl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['gl']), function(){});\n  };\n\n  Color.prototype.gl = function() {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function(r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function(x) {\n    x /= 255;\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  _interpolators = [];\n\n  interpolate = function(col1, col2, f, m) {\n    var interpol, len, o, res;\n    if (f == null) {\n      f = 0.5;\n    }\n    if (m == null) {\n      m = 'rgb';\n    }\n\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n    res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n    return res;\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function(col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  interpolate_rgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function(lum, mode) {\n    var cur_lum, eps, max_iter, test;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n    if (lum === 0) {\n      this._rgb = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      this._rgb = [255, 255, 255, this._rgb[3]];\n    } else {\n      eps = 1e-7;\n      max_iter = 20;\n      test = function(l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n        if (lm > lum) {\n          return test(l, m);\n        }\n        return test(m, h);\n      };\n      cur_lum = rgb2luminance(this._rgb);\n      this._rgb = (cur_lum > lum ? test(chroma('black'), this) : test(this, chroma('white'))).rgba();\n    }\n    return this;\n  };\n\n  temperature2rgb = function(kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n    return clip_rgb([r, g, b]);\n  };\n\n  rgb2temperature = function() {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n      if ((rgb[2] / rgb[0]) >= (b / r)) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['temperature']), function(){});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function() {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function(a, b) {\n    var l1, l2, ref, ref1;\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.luminance();\n    l2 = b.luminance();\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  Color.prototype.get = function(modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n    if (channel) {\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function(modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n            case '-':\n              src[i] += +value;\n              break;\n            case '*':\n              src[i] *= +(value.substr(1));\n              break;\n            case '/':\n              src[i] /= +(value.substr(1));\n              break;\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n    me._rgb = chroma(src, mode).alpha(me.alpha())._rgb;\n    return me;\n  };\n\n  Color.prototype.darken = function(amount) {\n    var lab, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function(amount) {\n    var lch, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function() {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function(bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function(f) {\n    return function(bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function(f) {\n    return function(c0, c1) {\n      var i, o, out;\n      out = [];\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n      return out;\n    };\n  };\n\n  normal = function(a, b) {\n    return a;\n  };\n\n  multiply = function(a, b) {\n    return a * b / 255;\n  };\n\n  darken = function(a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function(a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function(a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function(a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function(a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function(a, b) {\n    if (a === 255) {\n      return 255;\n    }\n    a = 255 * (b / 255) / (1 - a / 255);\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n\n  blend.multiply = blend_f(each(multiply));\n\n  blend.screen = blend_f(each(screen));\n\n  blend.overlay = blend_f(each(overlay));\n\n  blend.darken = blend_f(each(darken));\n\n  blend.lighten = blend_f(each(lighten));\n\n  blend.dodge = blend_f(each(dodge));\n\n  blend.burn = blend_f(each(burn));\n\n  chroma.blend = blend;\n\n  chroma.analyze = function(data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.scale = function(colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n    setColors = function(colors) {\n      var c, col, o, ref, ref1, ref2, w;\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n      if ((colors != null) && type(colors) === 'string' && (((ref = chroma.brewer) != null ? ref[colors] : void 0) != null)) {\n        colors = chroma.brewer[colors];\n      }\n      if (type(colors) === 'array') {\n        colors = colors.slice(0);\n        for (c = o = 0, ref1 = colors.length - 1; 0 <= ref1 ? o <= ref1 : o >= ref1; c = 0 <= ref1 ? ++o : --o) {\n          col = colors[c];\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n        _pos.length = 0;\n        for (c = w = 0, ref2 = colors.length - 1; 0 <= ref2 ? w <= ref2 : w >= ref2; c = 0 <= ref2 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n      resetCache();\n      return _colors = colors;\n    };\n    getClass = function(value) {\n      var i, n;\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n        return i - 1;\n      }\n      return 0;\n    };\n    tmap = function(t) {\n      return t;\n    };\n    classifyValue = function(value) {\n      var i, maxc, minc, n, val;\n      val = value;\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + ((_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc)) * (_max - _min);\n      }\n      return val;\n    };\n    getColor = function(val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n      if (isNaN(val)) {\n        return _nacol;\n      }\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n          t = Math.min(1, Math.max(0, t));\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n      k = Math.floor(t * 10000);\n      if (_colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n        _colorCache[k] = col;\n      }\n      return col;\n    };\n    resetCache = function() {\n      return _colorCache = {};\n    };\n    setColors(colors);\n    f = function(v) {\n      var c;\n      c = chroma(getColor(v));\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n    f.classes = function(classes) {\n      var d;\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n        return f;\n      }\n      return _classes;\n    };\n    f.domain = function(domain) {\n      var c, d, k, len, o, ref, w;\n      if (!arguments.length) {\n        return _domain;\n      }\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n      _domain = [_min, _max];\n      return f;\n    };\n    f.mode = function(_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n    f.range = function(colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n    f.out = function(_o) {\n      _out = _o;\n      return f;\n    };\n    f.spread = function(val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n      _spread = val;\n      return f;\n    };\n    f.correctLightness = function(v) {\n      if (v == null) {\n        v = true;\n      }\n      _correctLightness = v;\n      resetCache();\n      if (_correctLightness) {\n        tmap = function(t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function() {\n              if (pol) {\n                L_diff *= -1;\n              }\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n          return t;\n        };\n      } else {\n        tmap = function(t) {\n          return t;\n        };\n      }\n      return f;\n    };\n    f.padding = function(p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n    f.colors = function() {\n      var dd, dm, i, numColors, o, out, ref, results, samples, w;\n      numColors = 0;\n      out = 'hex';\n      if (arguments.length === 1) {\n        if (type(arguments[0]) === 'string') {\n          out = arguments[0];\n        } else {\n          numColors = arguments[0];\n        }\n      }\n      if (arguments.length === 2) {\n        numColors = arguments[0], out = arguments[1];\n      }\n      if (numColors) {\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n        return (function() {\n          results = [];\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--){ results.push(o); }\n          return results;\n        }).apply(this).map(function(i) {\n          return f(dm + i / (numColors - 1) * dd)[out]();\n        });\n      }\n      colors = [];\n      samples = [];\n      if (_classes && _classes.length > 2) {\n        for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n          samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n        }\n      } else {\n        samples = _domain;\n      }\n      return samples.map(function(v) {\n        return f(v)[out]();\n      });\n    };\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function() {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function() {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function(data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    if (filter == null) {\n      filter = function() {\n        return true;\n      };\n    }\n    add = function(val) {\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    };\n    visit = function(val, k) {\n      if (filter(val, k)) {\n        if ((key != null) && type(key) === 'function') {\n          return add(key(val));\n        } else if ((key != null) && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.limits = function(data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, value, values, w;\n    if (mode == null) {\n      mode = 'equal';\n    }\n    if (num == null) {\n      num = 7;\n    }\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function(a, b) {\n      return a - b;\n    });\n    limits = [];\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + (i / num) * (max - min));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = values.length * i / num;\n        pb = floor(p);\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * pr + values[pb + 1] * (1 - pr));\n        }\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + (i / num) * (max - min));\n      }\n      centroids.push(max);\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n        newCentroids = new Array(num);\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n        repeat = false;\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n        centroids = newCentroids;\n        nb_iters++;\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n      kClusters = {};\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n      tmpKMeansBreaks = [];\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        if (!isNaN(tmpKMeansBreaks[i])) {\n          limits.push(tmpKMeansBreaks[i]);\n        }\n      }\n    }\n    return limits;\n  };\n\n  hsi2rgb = function(h, s, i) {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n    h /= 360;\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function() {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = ((r - g) + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n      if (b > g) {\n        h = TWOPI - h;\n      }\n      h /= TWOPI;\n    }\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsi']), function(){});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function() {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function(col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat((function() {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch'];\n    results = [];\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n    return results;\n  })());\n\n  interpolate_num = function(col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function(col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}